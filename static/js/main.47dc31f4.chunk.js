(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{43:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(13),s=n.n(a),i=n(44),c=n.n(i),o=(n(50),n(5)),l=n(25),r=n(14),d=(n(51),n(52),n(45)),u=n(36),b=n(6),j=["value","onChange"];var h=function(e){var t=e.value,n=e.onChange,s=Object(d.a)(e,j),i=Object(a.useState)(null),c=Object(r.a)(i,2),o=c[0],h=c[1],m=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=m.current;e&&e.setSelectionRange(o,o)}),[m,o,t]),Object(b.jsx)(u.a,Object(l.a)({ref:m,value:t,onChange:function(e){h(e.target.selectionStart),n&&n(e)}},s))};var m=function(e){return Object(b.jsxs)("div",{className:"list-item-container",children:[Object(b.jsx)(h,{id:"list-item-label",value:e.listName,onChange:function(t){e.onListFieldChanged(e.listID,"listName",t.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("list-item-label")&&document.getElementById("list-item-label").blur())}}),Object(b.jsx)("div",{className:"button-container",children:Object(b.jsx)("button",{className:"view-list-button",onClick:function(){e.onListSelected(e.listID),e.showHomepage(!1),document.getElementById("home-button")&&document.getElementById("home-button").focus()},children:"View"})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{"aria-label":"Delete list button",className:"delete-list-button",onClick:function(){e.onDeleteList(e.listID)},children:"X"})})]})};n(54);var O=function(e){return Object(b.jsx)("div",{id:"list-container",children:Object(b.jsx)("div",{className:"checklist",children:e.listData.map((function(t){return Object(b.jsx)(m,{listID:t.id,listName:t.listName,currListID:e.currListID,currListName:e.currListName,onListSelected:e.onListSelected,homepage:e.homepage,showHomepage:e.showHomepage,onDeleteList:e.onDeleteList,onListFieldChanged:e.onListFieldChanged})}))})})};n(55);var p=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),s=n[0],i=n[1];return Object(b.jsxs)("div",{className:"add-task-container",children:[Object(b.jsx)("input",{className:"todo-input",id:"new-todo-text",placeholder:"Create a new list",value:s,onChange:function(e){i(e.target.value)},onKeyPress:function(t){""!==s&&"Enter"===t.key&&(e.onAddList(s),i(""))}}),Object(b.jsx)("button",{id:""!==s?"list-add-button":"list-add-button-disabled",tabIndex:""!==s?0:1,onClick:function(){""!==s&&(e.onAddList(s),i(""))},children:"Add"})]})};n(56);var g=function(e){var t=Object(a.useState)(e.taskLabel),n=Object(r.a)(t,2),s=n[0],i=n[1];return Object(b.jsxs)("div",{className:"task-container",children:[Object(b.jsx)("input",{type:"checkbox",className:"checkbox",checked:e.isCompleted,onChange:function(t){e.onTaskFieldChanged(e.taskId,"isCompleted",t.target.checked)},onKeyPress:function(t){"Enter"===t.key&&e.onTaskFieldChanged(e.taskId,"isCompleted",!e.isCompleted)}}),Object(b.jsx)(u.a,{id:e.isCompleted?"task-label-strikethrough":"task-label",value:s,onChange:function(e){return i(e.target.value)},onBlur:function(t){return e.onTaskFieldChanged(e.taskId,"taskLabel",s)},onKeyPress:function(e){"Enter"===e.key&&document.getElementById("task-label")&&(e.preventDefault(),document.getElementById("task-label").blur())},disabled:e.isCompleted}),Object(b.jsx)("div",{className:"button-container",children:Object(b.jsx)("button",{className:"priority-button",id:3===e.priority?"high":2===e.priority?"medium":"low","aria-label":(3===e.priority?"high":2===e.priority?"medium":"low")+" priority",onClick:function(){e.onChangePriority(e.taskId,e.priority)},children:"!".repeat(e.priority)})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"delete-list-button","aria-label":"delete",onClick:function(){e.onDeleteTask(e.taskId)},children:"X"})})]})};n(57);var f=function(e){return Object(b.jsx)("div",{id:"list-container",children:Object(b.jsx)("div",{className:"checklist",children:e.taskList.map((function(t){return Object(a.createElement)(g,Object(l.a)(Object(l.a)({},t),{},{key:t.taskId,onDeleteTask:e.onDeleteTask,onTaskFieldChanged:e.onTaskFieldChanged,onChangePriority:e.onChangePriority}))}))})})};n(58);var k=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),s=n[0],i=n[1];return Object(b.jsxs)("div",{className:"add-task-container",children:[Object(b.jsx)("input",{className:"todo-input",id:"new-todo-text",placeholder:"Create a new task",value:s,onChange:function(e){i(e.target.value)},onKeyPress:function(t){""!==s&&"Enter"===t.key&&(e.onAddTask(s),i(""))}}),Object(b.jsx)("button",{className:""!==s?"add-button":"add-button-disabled",tabIndex:""!==s?0:1,onClick:function(){""!==s&&(e.onAddTask(s),i(""))},children:"Add"})]})};n(59);document.getElementById("alert-cancel")&&document.getElementById("alert-cancel").hasFocus()&&console.log("on cancel");var v=function(e){return Object(b.jsx)("div",{className:"backdrop",children:Object(b.jsxs)("div",{id:"modal",children:[e.children,Object(b.jsxs)("div",{className:"alert-buttons",children:[Object(b.jsx)("button",{id:"alert-ok",onClick:function(){e.onOK(),e.onClose()},onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),document.getElementById("alert-cancel").focus())},children:"OK"}),Object(b.jsx)("button",{tabIndex:"0",className:"alert-button",id:"alert-cancel",onClick:function(){return e.onClose()},onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),document.getElementById("alert-ok").focus())},children:"Cancel"})]})]})})};n(60);var x=function(e){return Object(b.jsx)("div",{className:"sort-backdrop",children:Object(b.jsxs)("div",{className:"sort-modal",children:[e.children,Object(b.jsxs)("div",{className:"sort-buttons",children:[Object(b.jsx)("div",{id:"sort-by",children:"Sort by:"}),Object(b.jsx)("button",{className:"alert-button",id:"alert-sort-date",type:"button",onClick:function(){e.onSortByCreationDate(),e.onClose()},onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),document.getElementById("alert-sort-name").focus())},children:"dateCreated"===e.sortOption?"\u2713 Date Created":"Date Created"}),Object(b.jsx)("button",{className:"alert-button",id:"alert-sort-name",type:"button",onClick:function(){e.onSortByName(),e.onClose()},onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),document.getElementById("alert-sort-priority").focus())},children:"taskLabel"===e.sortOption?"\u2713 Name":"Name"}),Object(b.jsx)("button",{className:"alert-button",id:"alert-sort-priority",type:"button",onClick:function(){e.onSortByPriority(),e.onClose()},onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),document.getElementById("alert-sort-date").focus())},children:"priority"===e.sortOption?"\u2713 Priority":"Priority"})]})]})})};n(61);var C=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(!1),o=Object(r.a)(c,2),l=o[0],d=o[1];function u(){i(!s)}function j(){d(!l)}return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"toolbar",children:[Object(b.jsxs)("button",{id:"sort-button",className:"toolbar-button",onClick:j,children:[Object(b.jsx)("i",{id:"sort-icon",className:"las la-sort-amount-down"}),Object(b.jsx)("br",{}),"Sort"]}),l&&Object(b.jsx)(x,{className:"toolbar-button",sortOption:e.sortOption,onClose:j,onSortByName:function(){e.onSortSelected("taskLabel")},onSortByPriority:function(){e.onSortSelected("priority")},onSortByCreationDate:function(){e.onSortSelected("dateCreated")}}),Object(b.jsxs)("button",{className:"toolbar-button",id:"hide-button",onClick:function(){e.showCompleted?e.onSetShowCompleted(!1):e.onSetShowCompleted(!0)},children:[Object(b.jsx)("i",{id:"hide-icon",className:e.showCompleted?"las la-eye-slash":"las la-eye"}),Object(b.jsx)("br",{}),e.showCompleted?"Hide Completed":"Show All"]}),Object(b.jsxs)("button",{className:"toolbar-button",id:0!==e.numCompleted?"delete-button":"delete-completed-button-hidden",disabled:0===e.numCompleted,onClick:u,children:[Object(b.jsx)("i",{id:"delete-icon",className:"las la-trash"}),Object(b.jsx)("br",{}),"Delete Completed"]})]}),s&&Object(b.jsx)(v,{onClose:u,onOK:function(){e.onDeleteTasks()},children:Object(b.jsxs)("div",{children:["Are you sure you want to delete all ",e.numCompleted," completed tasks?"]})})]})};var y=function(e){var t=Object(a.useState)(!0),n=Object(r.a)(t,2),s=n[0],i=n[1],c=e.taskList.filter((function(e){return s||!e.isCompleted})),o=e.taskList.filter((function(e){return e.isCompleted})).length,l=Object(a.useState)(!0),d=Object(r.a)(l,2),u=d[0],j=d[1];return u?Object(b.jsxs)("div",{className:"app-container",children:[Object(b.jsxs)("div",{className:"heading",children:[Object(b.jsx)("h1",{children:Object(b.jsx)("div",{"aria-label":"Task Manager",className:"title",children:"Task Manager"})}),Object(b.jsx)("div",{className:"header",children:Object(b.jsx)("h2",{children:"All Lists"})})]}),Object(b.jsx)("div",{className:"top-button-bar",children:Object(b.jsx)("div",{className:"add-task",children:Object(b.jsx)(p,{onAddList:e.handleAddList,onListSelected:e.handleListSelected})})}),Object(b.jsx)("div",{className:"taskList",children:Object(b.jsx)(O,{listData:e.listData,currListID:e.currListID,currListName:e.currListName,onListSelected:e.handleListSelected,showHomepage:j,onDeleteList:e.handleDeleteList,onListFieldChanged:e.handleListFieldChanged})})]}):Object(b.jsxs)("div",{className:"app-container",children:[Object(b.jsxs)("div",{className:"heading",children:[Object(b.jsxs)("h1",{children:[Object(b.jsx)("button",{id:"home-button","aria-label":"Home Button",onClick:function(){j(!0)},children:Object(b.jsx)("i",{className:"las la-angle-left"})}),Object(b.jsx)("div",{className:"title",children:"Task Manager"})]}),Object(b.jsx)("div",{children:Object(b.jsx)("h2",{children:e.currListName})})]}),Object(b.jsx)("div",{className:"top-button-bar",children:Object(b.jsx)("div",{className:"add-task",children:Object(b.jsx)(k,{taskList:c,onSetTaskList:e.setTaskList,onAddTask:e.handleAddTask})})}),Object(b.jsx)("div",{className:"taskList",children:Object(b.jsx)(f,{taskList:c,onDeleteTask:e.handleDeleteTask,onChangePriority:e.handleChangePriority,onDeleteTasks:e.handleDeleteTasks,onTaskFieldChanged:e.handleTaskFieldChanged,numCompleted:o})}),Object(b.jsx)("div",{className:"bottomBar",children:Object(b.jsx)(C,{onDeleteTasks:e.handleDeleteTasks,showCompleted:s,onSetShowCompleted:i,numCompleted:o,onSortSelected:e.handleSortSelected,sortOption:e.sortOption})})]})},N=n(26),S=n(28),L=(n(43),new N.a.auth.GoogleAuthProvider),w=new N.a.auth.GithubAuthProvider;var D=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(""),o=Object(r.a)(c,2),l=o[0],d=o[1],u=Object(S.c)(e.auth),j=Object(r.a)(u,3),h=j[0],m=j[1],O=j[2];return Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(b.jsx)("input",{className:"signin-input",type:"email",value:s,onChange:function(e){return i(e.target.value)},placeholder:"email"}),Object(b.jsx)("input",{className:"signin-input",type:"password",value:l,onChange:function(e){return d(e.target.value)},placeholder:"password"}),Object(b.jsx)("button",{type:"submit",onClick:function(){return h(s,l)},className:"signin-button",children:"Sign In"})]}),!m&&O&&O.message,Object(b.jsx)("div",{className:"signin-google",children:Object(b.jsxs)("button",{className:"google-button",onClick:function(){return e.auth.signInWithPopup(L)},children:[Object(b.jsx)("img",{className:"google-logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/800px-Google_%22G%22_Logo.svg.png"}),"Sign In with Google"]})}),Object(b.jsx)("div",{className:"signin-google",children:Object(b.jsxs)("button",{className:"google-button",onClick:function(){return e.auth.signInWithPopup(w)},children:[Object(b.jsx)("img",{className:"google-logo",src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg"}),"Sign In with Github"]})})]})};var I=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(""),o=Object(r.a)(c,2),l=o[0],d=o[1],u=Object(a.useState)(""),j=Object(r.a)(u,2),h=j[0],m=j[1],O=Object(a.useState)(!1),p=Object(r.a)(O,2),g=p[0],f=p[1],k=Object(S.b)(e.auth),v=Object(r.a)(k,3),x=v[0],C=v[1],y=v[2];return Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(b.jsx)("input",{className:"signin-input",value:s,onChange:function(e){return i(e.target.value)},placeholder:"email",type:"email"}),Object(b.jsx)("input",{className:"signin-input",value:l,onChange:function(e){return d(e.target.value)},placeholder:"password",type:"password"}),Object(b.jsx)("input",{value:h,onChange:function(e){return m(e.target.value)},placeholder:"retype password",type:"password",className:"signin-input"}),Object(b.jsx)("button",{className:"signin-button",onClick:function(){l!==h?(f(!0),console.log("passwords dont match")):(f(!1),console.log("creating user with email/password ",s,l),x(s,l))},children:"Sign Up"}),Object(b.jsx)("button",{onClick:function(){return x("foo@bar.com","foobar")},children:"Create test user"})]}),!C&&(y||g)&&Object(b.jsx)("div",{className:"error-message",children:g?"Passwords do not match.":l.length<6?"Password must be at least 6 characters.":0===s.length?"Please enter a valid email address.":"An error occurred while signing up. Make sure you have entered a valid email and password."})]})};n(64);var T=function(e){var t=["tab-list-item"];return e.activeTab===e.label&&t.push("tab-list-active"),Object(b.jsx)("li",{className:t.join(" "),onClick:function(){return e.onClickTab(e.label)},children:e.label})};n(65);var E=function(e){var t=Object(a.useState)(e.children[0].key),n=Object(r.a)(t,2),s=n[0],i=n[1];return Object(b.jsxs)("div",{className:"tabs",children:[Object(b.jsx)("ol",{className:"tab-list",children:e.children.map((function(e){return Object(b.jsx)(T,{label:e.key,activeTab:s,onClickTab:function(e){return i(e)}},e.key)}))}),e.children.find((function(e){return e.key===s}))]})};var B=function(e){return Object(b.jsx)("div",{className:"app-container",children:Object(b.jsxs)("div",{className:"heading",children:[Object(b.jsx)("h1",{children:Object(b.jsx)("div",{"aria-label":"Task Manager",className:"title",children:"Task Manager"})}),Object(b.jsx)("div",{className:"header",children:Object(b.jsxs)(E,{className:"tabs",children:[Object(b.jsx)(D,{auth:e.auth},"Sign In"),Object(b.jsx)(I,{auth:e.auth},"Sign Up")]})})]})})},P=n.p+"static/media/LoadingSymbol.e9f28dc7.gif",A=n(40),F=n(41);N.a.initializeApp({apiKey:"AIzaSyDQNFNc9MOCJM7dDkmRmHeJu2-vx_XdZPI",authDomain:"em-zhang-cs124-lab.firebaseapp.com",projectId:"em-zhang-cs124-lab",storageBucket:"em-zhang-cs124-lab.appspot.com",messagingSenderId:"791807570724",appId:"1:791807570724:web:8c92b693e902d7077ab9b1",measurementId:"G-2CLJDP4NEV"});var K=N.a.firestore(),M=N.a.auth();var G="list-items";function H(e){var t=K.collection(G).where("owner","==",e.user.uid),n=Object(F.a)(t),s=Object(r.a)(n,1)[0],i=[];s&&(i=s.docs.map((function(e){return Object(l.a)({},e.data())})));var c=Object(a.useState)("default-list"),d=Object(r.a)(c,2),u=d[0],j=d[1],h=K.collection(G).doc(u).collection("tasks"),m=Object(a.useState)("dateCreated"),O=Object(r.a)(m,2),p=O[0],g=O[1];h=h.orderBy(p,"priority"===p?"desc":"asc");var f=Object(F.a)(h),k=Object(r.a)(f,3),v=k[0],x=k[1],C=(k[2],[]);v&&(C=v.docs.map((function(e){return Object(l.a)({},e.data())})));var S="";i.length>0&&(i.filter((function(e){return e.id===u})).length>0&&(S=i.filter((function(e){return e.id===u}))[0].listName));return Object(b.jsxs)("div",{children:[Object(b.jsx)(y,{user:e.user,listData:i,currListID:u,currListName:S,handleAddList:function(t){var n=Object(A.a)();return K.collection(G).doc(n).set({id:n,listName:t,owner:e.user.uid,sharedWith:[e.user.uid]}),n},handleListSelected:function(e){j(e)},handleDeleteList:function(e){K.collection(G).doc(e).delete()},handleListFieldChanged:function(e,t,n){K.collection(G).doc(e).update(Object(o.a)({},t,n))},taskList:C,handleDeleteTask:function(e){K.collection(G).doc(u).collection("tasks").doc(e).delete().catch((function(e){console.error("Error deleting document: ",e)}))},handleChangePriority:function(e,t){var n=K.collection(G).doc(u).collection("tasks").doc(e);1===t?n.update({priority:2}):2===t?n.update({priority:3}):3===t&&n.update({priority:1})},handleDeleteTasks:function(){K.collection(G).doc(u).collection("tasks").where("isCompleted","==",!0).get().then((function(e){e.forEach((function(e){e.ref.delete()}))}))},handleAddTask:function(t){var n=Object(A.a)();return K.collection(G).doc(u).collection("tasks").doc(n).set({taskId:n,taskLabel:t,isCompleted:!1,priority:1,dateCreated:N.a.database.ServerValue.TIMESTAMP,owner:e.user.uid}).catch((function(e){console.error("Error writing document: ",e)})),n},handleTaskFieldChanged:function(e,t,n){K.collection(G).doc(u).collection("tasks").doc(e).update(Object(o.a)({},t,n)).catch((function(e){console.error("Error updating document: ",e)}))},handleSortSelected:function(e){g(e)},sortOption:p}),x&&Object(b.jsx)("div",{className:"loading-message",children:Object(b.jsx)("img",{src:P,alt:"Loading..."})})]})}var V=function(e){var t=Object(S.a)(M),n=Object(r.a)(t,3),a=n[0],s=n[1],i=n[2];return s?Object(b.jsx)("p",{children:"Checking..."}):a?Object(b.jsxs)("div",{children:[a.displayName||a.email,Object(b.jsx)(H,Object(l.a)(Object(l.a)({},e),{},{user:a})),Object(b.jsx)("button",{type:"button",onClick:function(){return M.signOut()},children:"Logout"}),!a.emailVerified&&Object(b.jsx)("button",{type:"button",onClick:function(){M.currentUser.sendEmailVerification()},children:"Verify email"})]}):Object(b.jsxs)(b.Fragment,{children:[i&&Object(b.jsxs)("p",{children:["Error App: ",i.message]}),Object(b.jsx)(B,{auth:M})]})};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(V,{initialData:[{taskId:0,taskLabel:"Get lunch at dining hall",isCompleted:!0},{taskId:1,taskLabel:"Buy textbooks",isCompleted:!1},{taskId:2,taskLabel:"Watch videos about React",isCompleted:!0},{taskId:3,taskLabel:"Call Mom",isCompleted:!1},{taskId:4,taskLabel:"Meet with Prof. Rhodes",isCompleted:!1}]})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.47dc31f4.chunk.js.map